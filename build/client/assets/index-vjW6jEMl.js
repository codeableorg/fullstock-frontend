import{w as c}from"./with-props-D6VfJkxO.js";import{j as e}from"./jsx-runtime-D_zvdyIk.js";import{r as l,u as a}from"./chunk-LSOULM7L-BpBjtIwF.js";import{g as n}from"./auth.service-m9myRVhg.js";import{g as i}from"./order.service-fFja0B08.js";import"./utils-CNtvmiS0.js";async function j(){if(!await n())throw l("/login");try{const r=await i();return r.sort((t,s)=>s.createdAt.getTime()-t.createdAt.getTime()),{orders:r}}catch{return{}}}const f=c(function(){const{orders:r}=a();return e.jsx("div",{children:r.length>0?e.jsx("div",{className:"flex flex-col gap-4",children:r.map(t=>e.jsxs("div",{children:[e.jsx("div",{className:"rounded-lg bg-muted py-4 px-6",children:e.jsxs("dl",{className:"flex flex-col gap-4 w-full sm:flex-row",children:[e.jsxs("div",{className:"flex-shrink-0",children:[e.jsx("dt",{className:"font-medium text-accent-foreground",children:"Fecha del pedido"}),e.jsx("dd",{className:"mt-1",children:e.jsx("time",{dateTime:t.createdAt.toISOString(),children:t.createdAt.toLocaleDateString()})})]}),e.jsxs("div",{className:"flex-shrink-0 flex-grow",children:[e.jsx("dt",{className:"font-medium text-accent-foreground",children:"Número de orden"}),e.jsx("dd",{className:"mt-1",children:t.id})]}),e.jsxs("div",{className:"flex-shrink-0",children:[e.jsx("dt",{className:"font-medium text-accent-foreground",children:"Total"}),e.jsx("dd",{className:"mt-1 font-medium text-foreground",children:t.totalAmount.toLocaleString("en-US",{style:"currency",currency:"USD"})})]})]})}),e.jsxs("table",{className:"w-full mt-4 text-sm text-muted-foreground",children:[e.jsx("caption",{className:"sr-only",children:"Productos"}),e.jsx("thead",{className:"not-sr-only text-left",children:e.jsxs("tr",{children:[e.jsx("th",{scope:"col",className:"py-3 pl-16",children:"Producto"}),e.jsx("th",{scope:"col",className:"py-3 pr-8 text-center hidden sm:table-cell sm:w-1/5",children:"Precio"}),e.jsx("th",{scope:"col",className:"py-3 pr-8 text-center hidden sm:table-cell sm:w-1/5",children:"Cantidad"}),e.jsx("th",{scope:"col",className:"py-3 pr-8 text-center",children:"Total"})]})}),e.jsx("tbody",{className:"border-t border-b border-border",children:t.items.map(s=>e.jsxs("tr",{children:[e.jsx("td",{className:"py-6 pl-6",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-16 rounded-xl bg-muted",children:e.jsx("img",{src:s.imgSrc,alt:s.title})}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-foreground",children:s.title}),e.jsxs("div",{className:"mt-1 sm:hidden",children:[s.quantity," × $",s.price.toFixed(2)]})]})]})}),e.jsxs("td",{className:"py-6 pr-8 text-center hidden sm:table-cell",children:["$",s.price.toFixed(2)]}),e.jsx("td",{className:"py-6 pr-8 text-center hidden sm:table-cell",children:s.quantity}),e.jsxs("td",{className:"py-6 pr-8 whitespace-nowrap text-center font-medium text-foreground",children:["$",(s.price*s.quantity).toFixed(2)]})]},s.productId))})]})]},t.id))}):e.jsx("p",{className:"text-muted-foreground",children:"No hay pedidos realizados"})})});export{j as clientLoader,f as default};
