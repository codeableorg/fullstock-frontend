import{w as h}from"./with-props-D6VfJkxO.js";import{j as e}from"./jsx-runtime-D_zvdyIk.js";import{z as n,u as b,s as j}from"./index-DUIJGpQy.js";import{r as d,b as w,a as C,c as N,L as S}from"./chunk-LSOULM7L-BpBjtIwF.js";import{I as u,B as y}from"./index-C5VsBwWd.js";import{C as v}from"./index-Dmyz6W4A.js";import{S as L}from"./index-CsEUUeP5.js";import{l as I,g as A}from"./auth.service-m9myRVhg.js";import"./utils-CNtvmiS0.js";import"./index-DwQA15mT.js";const D=n.object({email:n.string().email("Correo electrónico inválido"),password:n.string().min(6,"La contraseña debe tener al menos 6 caracteres")});async function q({request:o}){const s=await o.formData(),a=s.get("email"),r=s.get("password");try{return await I(a,r),d("/")}catch(t){return t instanceof Error?{error:t.message}:{error:"Error desconocido"}}}async function G(){if(await A())return d("/")}const H=h(function(){var m,l;const s=w(),a=C(),r=N(),t=a.state==="submitting",{register:i,handleSubmit:p,formState:{errors:c,isValid:f}}=b({resolver:j(D),defaultValues:{email:"",password:""},mode:"onTouched"});async function x(g){s(g,{method:"post"})}return e.jsx(L,{children:e.jsxs(v,{className:"max-w-sm",children:[e.jsx("h1",{className:"text-2xl leading-7 font-bold text-center mb-10",children:"Inicia sesión en tu cuenta"}),e.jsxs("form",{onSubmit:p(x),className:"flex flex-col gap-6",children:[e.jsx(u,{label:"Correo electrónico",type:"email",autoComplete:"email",error:(m=c.email)==null?void 0:m.message,...i("email")}),e.jsx(u,{label:"Contraseña",type:"password",autoComplete:"current-password",error:(l=c.password)==null?void 0:l.message,...i("password")}),e.jsx(y,{size:"lg",className:"w-full",disabled:!f||t,children:t?"Iniciando...":"Iniciar sesión"}),(r==null?void 0:r.error)&&e.jsx("p",{className:"text-red-500 text-sm text-center mt-2",children:r.error})]}),e.jsxs("div",{className:"flex justify-center gap-2 mt-10 text-sm leading-6",children:[e.jsx("span",{className:"text-muted-foreground",children:"¿Aún no tienes cuenta?"}),e.jsx(S,{to:"/signup",className:"text-accent-foreground hover:underline",children:"Crea una cuenta"})]})]})})});export{q as clientAction,G as clientLoader,H as default};
