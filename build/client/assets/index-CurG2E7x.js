import{w as m}from"./with-props-D6VfJkxO.js";import{j as a}from"./jsx-runtime-D_zvdyIk.js";import{r as l,u as d,d as u}from"./chunk-LSOULM7L-BpBjtIwF.js";import{I as n,B as c}from"./index-C5VsBwWd.js";import{g as p}from"./auth.service-m9myRVhg.js";import{u as f}from"./user.service-DZA7gS4U.js";import"./utils-CNtvmiS0.js";import"./index-DwQA15mT.js";async function L(){const t=await p();if(!t)throw l("/login");return{user:t}}async function N({request:t}){const e=await t.formData();try{return await f({name:e.get("name"),...e.get("newPassword")?{password:e.get("newPassword")}:{}}),{ok:!0}}catch(r){return console.error(r),{ok:!1}}}const C=m(function(){const{user:e}=d(),r=u(),s=r.state==="submitting",i=o=>{o.preventDefault(),r.submit(o.target,{method:"post"}),o.target.elements.namedItem("newPassword").value=""};return a.jsxs("form",{className:"max-w-md flex flex-col gap-6",onSubmit:i,children:[a.jsx(n,{label:"Correo electrónico",name:"email",type:"email",value:e.email,disabled:!0}),a.jsx(n,{label:"Nombre",name:"name",defaultValue:(e==null?void 0:e.name)||"",minLength:1,disabled:s}),a.jsx(n,{label:"Nueva contraseña",name:"newPassword",type:"password",minLength:6,disabled:s}),a.jsx(c,{type:"submit",size:"xl",className:"self-stretch",disabled:s,children:s?"Guardando...":"Guardar cambios"})]})});export{N as clientAction,L as clientLoader,C as default};
