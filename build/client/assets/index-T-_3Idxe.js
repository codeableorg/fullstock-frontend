import{w as p}from"./with-props-D6VfJkxO.js";import{j as e}from"./jsx-runtime-D_zvdyIk.js";import{F as g,L as a,N as b,u as y,k as N,d as k,g as d,O as v,S as w}from"./chunk-LSOULM7L-BpBjtIwF.js";import{B as l,S as m,b as S}from"./index-C5VsBwWd.js";import{C as x}from"./index-Dmyz6W4A.js";import{a as f}from"./utils-CNtvmiS0.js";import{c as u}from"./createLucideIcon-BrLl2DWw.js";import{S as C}from"./index-CsEUUeP5.js";import{g as z}from"./cart-CZ8beLYv.js";import{g as L}from"./auth.service-m9myRVhg.js";import"./index-DwQA15mT.js";import"./product.service-Cwpiyzog.js";/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const F=u("Loader",[["path",{d:"M12 2v4",key:"3427ic"}],["path",{d:"m16.2 7.8 2.9-2.9",key:"r700ao"}],["path",{d:"M18 12h4",key:"wj9ykh"}],["path",{d:"m16.2 16.2 2.9 2.9",key:"1bxg5t"}],["path",{d:"M12 18v4",key:"jadmvz"}],["path",{d:"m4.9 19.1 2.9-2.9",key:"bwix9q"}],["path",{d:"M2 12h4",key:"j09sii"}],["path",{d:"m4.9 4.9 2.9 2.9",key:"giyufr"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const M=u("ShoppingCart",[["circle",{cx:"8",cy:"21",r:"1",key:"jimo8o"}],["circle",{cx:"19",cy:"21",r:"1",key:"13723u"}],["path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12",key:"9zh506"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const R=u("UserRound",[["circle",{cx:"12",cy:"8",r:"5",key:"1hypcn"}],["path",{d:"M20 21a8 8 0 0 0-16 0",key:"rfgkzh"}]]);function T({className:s}){return e.jsx("div",{className:"flex h-full grow items-center justify-center",children:e.jsx(F,{className:f("h-8 w-8 animate-spin",s),"aria-label":"Loading"})})}function H({user:s}){return e.jsx("div",{className:"bg-black text-white text-sm font-medium",children:e.jsx(x,{className:"h-10 flex justify-end items-center",children:e.jsx("nav",{"aria-label":"Autenticación de usuario",children:e.jsx("ul",{className:"flex items-center gap-4",children:s?e.jsxs(e.Fragment,{children:[e.jsxs("li",{children:["Bienvenido ",s.name||s.email]}),e.jsx("li",{children:e.jsx(g,{method:"post",action:"/logout",children:e.jsx(l,{variant:"ghost",className:"text-white",children:"Cerrar sesión"})})})]}):e.jsxs(e.Fragment,{children:[e.jsx("li",{children:e.jsx(a,{to:"/login",className:"hover:underline hover:decoration-white hover:underline-offset-2",children:"Iniciar sesión"})}),e.jsx("li",{children:e.jsx(a,{to:"/signup",className:"hover:underline hover:decoration-white hover:underline-offset-2",children:"Crear una cuenta"})})]})})})})})}const I="/assets/fullstock-logo-D2omHfT8.svg";function P({user:s,totalItems:t}){return e.jsxs("div",{className:"flex gap-2 items-center",children:[s&&e.jsxs(e.Fragment,{children:[e.jsx(a,{to:"/account",children:e.jsx(l,{size:"xl-icon",variant:"ghost","aria-label":"Cuenta de usuario",children:e.jsx(R,{})})}),e.jsx(m,{orientation:"vertical",className:"h-6"})]}),e.jsx(l,{size:"xl-icon",variant:"ghost","aria-label":"Carrito de compras",asChild:!0,className:"relative",children:e.jsxs(a,{to:"/cart",children:[e.jsx(M,{}),t>0&&e.jsx("span",{className:"absolute -bottom-1 -right-1 bg-primary text-primary-foreground text-xs rounded-full h-5 w-5 flex items-center justify-center",children:t})]})})]})}function q({items:s}){return e.jsx("nav",{"aria-label":"Navegación principal",className:"static sm:absolute sm:top-1/2 sm:left-1/2 sm:-translate-x-1/2 sm:-translate-y-1/2",children:e.jsx("ul",{className:"flex justify-center h-12",role:"menubar",children:s.map(t=>e.jsx("li",{className:"flex justify-center",role:"none",children:e.jsx(b,{to:t.to,role:"menuitem",className:({isActive:r})=>f("inline-flex justify-center items-center p-3 text-sm font-medium text-muted-foreground transition-colors duration-200 hover:bg-accent",r&&"text-accent-foreground"),children:t.label})},t.to))})})}const A=[{to:"polos",label:"Polos"},{to:"tazas",label:"Tazas"},{to:"stickers",label:"Stickers"}];function E({user:s,totalItems:t}){return e.jsxs(x,{className:"relative",children:[e.jsxs("div",{className:"flex justify-between items-center h-12",children:[e.jsx(a,{to:"/",children:e.jsx("img",{src:I,alt:"FullStock inicio",width:"128",height:"32"})}),e.jsx(P,{user:s,totalItems:t})]}),e.jsx(m,{className:"block sm:hidden"}),e.jsx(q,{items:A})]})}async function X({request:s}){const t=await s.formData();try{return await new Promise(r=>setTimeout(r,1e3)),{ok:!0,message:`Suscripción exitosa con email: ${t.get("email")}`}}catch(r){return console.error(r),{ok:!1,message:"Hubo un error al procesar tu solicitud"}}}async function Y(){var o;const s=await L(),t=await z(),r=((o=t==null?void 0:t.items)==null?void 0:o.reduce((i,n)=>i+n.quantity,0))||0;return s?{user:s,totalItems:r}:{totalItems:r}}const Z=p(function(){var h;const{user:t,totalItems:r}=y(),o=N(),i=k(),n=d.useRef(null),c=i.state==="submitting";return d.useEffect(()=>{var j;(j=i.data)!=null&&j.ok&&n.current&&(n.current.value="")},[i.data]),e.jsxs("div",{className:"grid grid-rows-[auto_1fr_auto] min-h-screen bg-background",children:[e.jsxs("header",{className:"sticky top-0 bg-background border-b border-border z-50",children:[e.jsx(H,{user:t}),e.jsx(E,{user:t,totalItems:r})]}),e.jsx("main",{children:e.jsx(d.Suspense,{fallback:e.jsx(T,{}),children:e.jsx(v,{})},o.key)}),e.jsx("footer",{className:"border-t border-border",children:e.jsxs(x,{children:[e.jsxs(C,{className:"flex flex-col gap-8 lg:flex-row",children:[e.jsxs("div",{className:"flex flex-wrap gap-y-4 gap-x-8 flex-grow",children:[e.jsxs("ul",{className:"flex-1 basis-40 flex flex-col gap-6 text-sm text-muted-foreground",children:[e.jsx("li",{className:"font-medium text-foreground",children:"Tienda"}),e.jsx("li",{children:e.jsx(a,{to:"/polos",children:"Polos"})}),e.jsx("li",{children:e.jsx(a,{to:"/tazas",children:"Tazas"})}),e.jsx("li",{children:e.jsx(a,{to:"/stickers",children:"Stickers"})})]}),e.jsxs("ul",{className:"flex-1 basis-40 flex flex-col gap-6 text-sm text-muted-foreground",children:[e.jsx("li",{className:"font-medium text-foreground",children:"Compañía"}),e.jsx("li",{children:e.jsx(a,{to:"/quienes-somos",children:"Quienes somos"})}),e.jsx("li",{children:e.jsx(a,{to:"/terminos",children:"Términos y condiciones"})}),e.jsx("li",{children:e.jsx(a,{to:"/privacidad",children:"Privacidad"})})]}),e.jsxs("ul",{className:"flex-1 basis-40 flex flex-col gap-6 text-sm text-muted-foreground",children:[e.jsx("li",{className:"font-medium text-foreground",children:"Conecta"}),e.jsx("li",{children:e.jsx(a,{to:"/contacto",children:"Contáctanos"})}),e.jsx("li",{children:e.jsx(a,{to:"https://www.facebook.com/",target:"_blank",children:"Facebook"})}),e.jsx("li",{children:e.jsx(a,{to:"https://www.instagram.com/",target:"_blank",children:"Instagram"})})]})]}),e.jsxs("div",{className:"text-sm max-w-md",children:[e.jsx("p",{className:"font-medium mb-6",children:"Suscríbete a nuestro boletín"}),e.jsx("p",{className:"text-muted-foreground mb-2",children:"Recibe las últimas ofertas y descuentos en tu correo semanalmente."}),e.jsxs(i.Form,{method:"post",className:"flex gap-2",children:[e.jsx(S,{type:"email",ref:n,"aria-label":"email",required:!0,name:"email",disabled:c,placeholder:"ejemplo@mail.com"}),e.jsx(l,{size:"lg",variant:"secondary",type:"submit",disabled:c,children:c?"Enviando...":"Suscribirse"})]}),e.jsx("p",{className:"text-muted-foreground my-2",children:(h=i.data)==null?void 0:h.message})]})]}),e.jsx(m,{orientation:"horizontal",decorative:!0}),e.jsx("small",{className:"block text-center text-sm text-muted-foreground py-6",children:"Todos los derechos reservados © Full Stock"})]})}),e.jsx(w,{})]})});export{X as clientAction,Y as clientLoader,Z as default};
