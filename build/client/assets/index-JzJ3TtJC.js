import{w as b}from"./with-props-D6VfJkxO.js";import{j as e}from"./jsx-runtime-D_zvdyIk.js";import{z as n,u as h,s as w}from"./index-DUIJGpQy.js";import{r as d,b as j,a as C,c as S,L as y}from"./chunk-LSOULM7L-BpBjtIwF.js";import{I as u,B as N}from"./index-C5VsBwWd.js";import{C as v}from"./index-Dmyz6W4A.js";import{d as A}from"./utils-CNtvmiS0.js";import{S as E}from"./index-CsEUUeP5.js";import{s as z,g as L}from"./auth.service-m9myRVhg.js";import{f as D}from"./user.service-DZA7gS4U.js";import"./index-DwQA15mT.js";const F=A(D,300),I=n.object({email:n.string().email("Correo electrónico inválido").refine(async r=>r.match(/^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/)?await F(r):!1,"El correo no esta disponible"),password:n.string().min(6,"La contraseña debe tener al menos 6 caracteres")});async function $({request:r}){const a=await r.formData(),o=a.get("email"),t=a.get("password");try{return await z(o,t),d("/")}catch(s){return s instanceof Error?{error:s.message}:{error:"Error desconocido"}}}async function G(){if(await L())return d("/")}const H=b(function(){var m,l;const a=j(),o=C(),t=S(),s=o.state==="submitting",{register:i,handleSubmit:p,formState:{errors:c,isValid:f}}=h({resolver:w(I),defaultValues:{email:"",password:""},mode:"onTouched"});async function x(g){a(g,{method:"post"})}return e.jsx(E,{children:e.jsxs(v,{className:"max-w-sm mx-auto",children:[e.jsx("h1",{className:"text-2xl font-bold text-center mb-10",children:"Crea una cuenta"}),e.jsxs("form",{onSubmit:p(x),className:"flex flex-col gap-6",children:[e.jsx(u,{label:"Correo electrónico",type:"email",required:!0,autoComplete:"email",error:(m=c.email)==null?void 0:m.message,...i("email")}),e.jsx(u,{label:"Contraseña",type:"password",required:!0,autoComplete:"current-password",error:(l=c.password)==null?void 0:l.message,...i("password")}),e.jsx(N,{size:"lg",className:"w-full",disabled:!f||s,children:s?"Creando...":"Crear cuenta"}),(t==null?void 0:t.error)&&e.jsx("p",{className:"text-red-500 text-sm text-center mt-2",children:t.error})]}),e.jsxs("div",{className:"flex justify-center gap-2 mt-10 text-sm",children:[e.jsx("span",{className:"text-muted-foreground",children:"¿Ya tienes una cuenta?"}),e.jsx(y,{to:"/login",className:"text-accent-foreground hover:underline",children:"Inicia sesión"})]})]})})});export{$ as clientAction,G as clientLoader,H as default};
