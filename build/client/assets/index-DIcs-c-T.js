import{w as l}from"./with-props-BBqpwT5E.js";import{r as c,b as d,j as r}from"./chunk-LSOULM7L-OaPJ-Plh.js";import{I as n,B as u}from"./index-Dbs4k1je.js";import{g as p}from"./auth.service-2jA2gaO1.js";import{u as f}from"./user.service-DZA7gS4U.js";import"./utils-CNtvmiS0.js";import"./index-BIC2x-iH.js";async function P(){const t=await p();if(!t)throw c("/login");return{user:t}}async function N({request:t}){const a=await t.formData();try{return await f({name:a.get("name"),...a.get("newPassword")?{password:a.get("newPassword")}:{}}),{ok:!0}}catch(e){return console.error(e),{ok:!1}}}const C=l(function({loaderData:a}){const{user:e}=a,i=d(),s=i.state==="submitting",m=o=>{o.preventDefault(),i.submit(o.target,{method:"post"}),o.target.elements.namedItem("newPassword").value=""};return r.jsxs("form",{className:"max-w-md flex flex-col gap-6",onSubmit:m,children:[r.jsx(n,{label:"Correo electrónico",name:"email",type:"email",value:e.email,disabled:!0}),r.jsx(n,{label:"Nombre",name:"name",defaultValue:(e==null?void 0:e.name)||"",minLength:1,disabled:s}),r.jsx(n,{label:"Nueva contraseña",name:"newPassword",type:"password",minLength:6,disabled:s}),r.jsx(u,{type:"submit",size:"xl",className:"self-stretch",disabled:s,children:s?"Guardando...":"Guardar cambios"})]})});export{N as clientAction,P as clientLoader,C as default};
